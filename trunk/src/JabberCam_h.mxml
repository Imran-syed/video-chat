<?xml version="1.0" encoding="utf-8"?>
<!--
/**
 * VIDEOSOFTWARE.PRO
 * Copyright 2010 VideoSoftware.PRO
 * All Rights Reserved.
 *
 * This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License
 *  as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied
 *  warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 *  See the GNU General Public License for more details.
 *  You should have received a copy of the GNU General Public License along with this program.
 *  If not, see <http://www.gnu.org/licenses/>.
 * 
 *  Author: Our small team and fast growing online community at videosoftware.pro
 */
-->
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
	 backgroundImage="{background.selectedValue}"
	 applicationComplete="this.appComplete = true; initApp()" 
	 initialize="init()" layout="horizontal"
	 color="#000000" backgroundColor="#000000"
	 horizontalAlign="center" verticalAlign="top" borderColor="#FFFFFF"
	 xmlns:local="jabbercam.comp.*"
	 keyUp="checkKeyPressed(event)" width="100%" height="621" paddingLeft="0" paddingTop="0"
	 paddingRight="0" paddingBottom="0">
	 
	 <mx:HTTPService id="settingsLoader" resultFormat="e4x" result="getSettings(event)" showBusyCursor="true"
	 	url="jabbercam/config.php?setts" fault="trace('fault: ',event.message)" />
	 	
<mx:Script source="JabberCam.as">
</mx:Script>

<mx:Style source="../assets/style.css"></mx:Style>

<mx:Boolean id="lockOwnControls">false</mx:Boolean>
<mx:Boolean id="canHideOwnControls">true</mx:Boolean>
<mx:Boolean id="lockPartnerControls">false</mx:Boolean>
<mx:Boolean id="canHidePartnerControls">true</mx:Boolean>

<mx:VBox verticalGap="2" paddingLeft="5" paddingTop="5" paddingRight="5" paddingBottom="5" id="vbContent">	
	<mx:HBox height="271" horizontalScrollPolicy="off">
		<mx:HBox width="670" backgroundColor="#000000" paddingLeft="5" paddingTop="5" paddingRight="5" paddingBottom="5">
			<mx:VBox verticalGap="0">
				<mx:Canvas width="100%">
					<mx:Label id="partnerLabel" color="#FFFFFF"/>
					<mx:HBox horizontalGap="0" right="0">
						<mx:Label id="volumeLabel" fontWeight="bold" color="#ffffff"/>
						<mx:HSlider id="speakerVolumeSlider" showDataTip="false" width="120" minimum="0" maximum="1" change="speakerVolumeChanged(event)"/>			
					</mx:HBox>
				</mx:Canvas>
				<mx:Canvas width="100%" mouseOver="canHidePartnerControls=false; partnerControls.visible=true;"
					rollOut="canHidePartnerControls=true; if(!lockPartnerControls){partnerControls.visible=false;}">
					<mx:VideoDisplay width="320" height="240" id="vidOther"/>
					<mx:Canvas backgroundColor="0x000000" width="100%" height="100%" id="adContainer"
						visible="{!peerCameraAllowed || ccCallState != CCCallEstablished}"
						includeInLayout="{adContainer.visible}">
						<mx:Image width="100%" height="100%" horizontalAlign="center" verticalAlign="middle"
						source="{currentAd}" open="beginLoadingAd()" complete="completeLoadingAd()"
						id="ad" />
					</mx:Canvas>
					<local:AgeSelector id="lookupAge" change="lookupAgeChange()" visible="{partnerControls.visible}" liveDragging="false" showDataTip="false" />
					<mx:VBox id="partnerControls" bottom="0" showEffect="Fade" hideEffect="Fade" visible="false" width="100%">
						<mx:HBox width="100%" horizontalAlign="center">
							<mx:Label id="seekingLabel" fontWeight="bold" color="#FFFFFF"/>
							<mx:CheckBox id="rbSexFemale" change="checkSexFilter()" enabled="true" color="#FFFFFF"/>
							<mx:CheckBox id="rbSexMale" change="checkSexFilter()" enabled="true" color="#FFFFFF"/>
							<mx:Label id="partnerLanguageLabel" visible="false" styleName="White" width="1"/>
							<mx:ComboBox id="langFilter" change="langFilterChange()" selectedIndex="0"
								open="lockPartnerControls=true"
								close="lockPartnerControls=false; if(canHidePartnerControls)partnerControls.visible=false"
								dataProvider="{langFilterValues}" text="Lang" />
						</mx:HBox>
						<mx:HBox width="100%" horizontalAlign="center">
						<mx:VBox visible="{CustomFilter.customFilter1Values != null &amp;&amp; CustomFilter.customFilter1Values.length &gt; 0}"
							  id="customFilter1PC">
							<mx:Label color="#FFFFFF" text="{CustomFilter.customFilter1Label}" />
							<mx:ComboBox id="customFilter1Pref" change="customFilter1PrefChange()" dataProvider="{CustomFilter.customFilter1Labels}" selectedIndex="0" />
						</mx:VBox>
						<mx:VBox visible="{CustomFilter.customFilter2Values != null &amp;&amp; CustomFilter.customFilter2Values.length &gt; 0}"
							  id="customFilter2PC">
							<mx:Label color="#FFFFFF" text="{CustomFilter.customFilter2Label}" />
							<mx:ComboBox id="customFilter2Pref" change="customFilter2PrefChange()" dataProvider="{CustomFilter.customFilter2Labels}" selectedIndex="0" />
						</mx:VBox>
						</mx:HBox>
					<mx:Label id="autoNextIntervalLabel" text="auto Next (sec)" fontSize="9" color="#FFFFFF"
						y="191" x="-1" showEffect="Fade" hideEffect="Fade" visible="{lookupAge.visible}"/>
					<mx:HSlider id="autoDisconnect" labels="{AutoDisconnect.labels}"
						minimum="0" maximum="4" snapInterval="1" tickInterval="1" tickColor="#ffffff"
						showEffect="Fade" hideEffect="Fade" visible="{lookupAge.visible}"
						labelStyleName="sliderLabelStyle" liveDragging="false"
						change="autoDisconnectChange()" bottom="0" width="100%" showDataTip="false" />
					</mx:VBox>
				</mx:Canvas>
			</mx:VBox>
			<mx:VRule height="100%"/>
			<mx:VBox verticalGap="0">
				<mx:Canvas width="100%">
					<mx:Label id="youLabel"  color="#FFFFFF"/>
					<mx:HBox horizontalGap="0" right="0">
						<mx:Label id="fromLabel" styleName="White" visible="false" />
				<mx:Image source="jabbercam/flags/{countryCode.toLowerCase()}.png" visible="{countryCode != '' &amp;&amp; countryCode != null}" toolTip="{country}"/>
						<mx:Label id="microphoneLabel" fontWeight="bold" color="#ffffff"/>
						<mx:HSlider id="micVolumeSlider" showDataTip="false" width="120" minimum="0" maximum="100" change="micVolumeChanged(event)"/>				
					</mx:HBox>
				</mx:Canvas>
				<mx:Canvas mouseOver="canHideOwnControls = false; ownControls.visible=true"	rollOut="canHideOwnControls=true; if(!lockOwnControls)ownControls.visible=false">
					<mx:VideoDisplay width="320" height="240" id="vidMe"/>
					<local:AgeSelector id="age" visible="{ownControls.visible}" change="onAgeChange()" liveDragging="false"	showDataTip="false" />
					<mx:VBox id="ownControls" bottom="0" showEffect="Fade" hideEffect="Fade" visible="false" width="100%">
						<mx:HBox width="100%" horizontalAlign="center">
								<mx:TextInput editable="false" id="myUsername" enter="changeUsername()" alpha="0.7" width="76" borderStyle="solid" cornerRadius="4"/>
								<mx:RadioButtonGroup id="rgMySex"/>
								<mx:RadioButton id="rbFemale" groupName="rgMySex" click="onSexFemale()" enabled="true" color="#FFFFFF"/>
								<mx:RadioButton id="rbMale" groupName="rgMySex" click="onSexMale()" enabled="true" color="#FFFFFF"/>
								<mx:Label id="myLanguageLabel" visible="false" styleName="White" width="1"/>
								<mx:ComboBox id="langSetting" change="langSettingChange()" open="lockOwnControls=true"
									dataProvider="{langFilterValues}" selectedIndex="0" 
									close="lockOwnControls=false;if(canHideOwnControls)ownControls.visible=false"/>
						</mx:HBox>
						<mx:HBox width="100%" horizontalAlign="center">
						<mx:VBox visible="{CustomFilter.customFilter1Values != null &amp;&amp; CustomFilter.customFilter1Values.length &gt; 0}"
							  id="customFilter1C">
							<mx:Label color="#FFFFFF" text="{CustomFilter.customFilter1Label}" />
							<mx:ComboBox id="customFilter1Setting" change="customFilter1SettingChange()" dataProvider="{CustomFilter.customFilter1Labels}" selectedIndex="0" />
						</mx:VBox>
						<mx:VBox visible="{CustomFilter.customFilter2Values != null &amp;&amp; CustomFilter.customFilter2Values.length &gt; 0}"
							  id="customFilter2C">
							<mx:Label color="#FFFFFF" text="{CustomFilter.customFilter2Label}" />
							<mx:ComboBox id="customFilter2Setting" change="customFilter2SettingChange()" dataProvider="{CustomFilter.customFilter2Labels}" selectedIndex="0" />
						</mx:VBox>
						</mx:HBox>
						<mx:HBox width="100%" horizontalAlign="center">
							<mx:Button click="onPreview()" id="btnPreview" width="150"  toggle="true"/>
						</mx:HBox>
						<mx:HBox width="100%" horizontalAlign="center">
							<mx:ComboBox open="lockOwnControls=true" close="lockOwnControls=false;
								if(canHideOwnControls)ownControls.visible = false" id="cameraSelection"
								dataProvider="{cameraNames}" change="cameraChanged(event)" width="149" />
							<mx:ComboBox open="lockOwnControls=true" close="lockOwnControls=false;
								if(canHideOwnControls)ownControls.visible = false" id="micSelection" 
								dataProvider="{micNames}" change="micChanged(event)" width="149"/>
						</mx:HBox>
					</mx:VBox>	
				</mx:Canvas>
			</mx:VBox>
		</mx:HBox>		
		<mx:VBox verticalGap="10">
			<mx:Button skin="@Embed(source='../assets/myspace.png')" toolTip="{this.lang.myspaceTooltip}"
				click="onSocialButtonClick(this.lang.getSetting('myspaceLink'))" buttonMode="true" />
			<mx:Button skin="@Embed(source='../assets/facebook.png')" toolTip="{this.lang.facebookTooltip}"
				click="onSocialButtonClick(this.lang.getSetting('facebookLink'))" buttonMode="true" />
			<mx:Button skin="@Embed(source='../assets/twitter.png')" toolTip="{this.lang.twitterTooltip}"
				click="onSocialButtonClick(this.lang.getSetting('twitterLink'))" buttonMode="true" />
			<mx:Button skin="@Embed(source='../assets/jabbercam.png')" toolTip="Start Your Own JabberCam Website! Get the Program and the Source Code. Click Here for more information."
				click="onSocialButtonClick('http://www.videosoftware.pro')" buttonMode="true" />
		</mx:VBox>
	</mx:HBox>	
	<mx:HBox horizontalGap="0">
		<mx:VBox height="196">
			<mx:Canvas>
				<mx:TextArea width="670" height="120" id="taChat" editable="false" wordWrap="true" added="/* if(event.target is VScrollBar)taChatVScrollBarAdded(event.target as VScrollBar) */" />
				<mx:Label styleName="White" id="iamLabel" visible="false"/>
				<mx:HBox left="9" top="4">
					<mx:Label id="ccLabel" text="Connect me diretly to (User ID)" styleName="Blue"/>
					<mx:TextInput id="ccUsername" alpha="0.7" width="76" height="16" borderStyle="solid" cornerRadius="4" paddingBottom="0" styleName="Blue" fontFamily="Arial" fontSize="9"/>
					<mx:Button label="Connect" click="findUserByName()" id="ccConnect" width="64" height="16" fontFamily="Arial" fontSize="9"/>
				</mx:HBox>
				
				<mx:Button label="SpeedDate" id="speedDate" click="onSpeedDateClick()" toggle="true"  width="103" height="16" right="113" top="28" fontFamily="Arial" fontSize="9"/>
				<mx:Button label="SpeedChat" id="speedChat" click="onSpeedChatClick()" toggle="true"  width="103" height="16" right="113" top="46" fontFamily="Arial" fontSize="9"/>
				<mx:Button label="Credits" click="onSocialButtonClick('http://www.videosoftware.pro')" width="103" height="16" right="113" top="64" fontFamily="Arial" fontSize="9"/>
				<mx:Button label="Help" click="onSocialButtonClick('http://www.jabbercam.com/help')" width="103" height="16" right="113" top="82" fontFamily="Arial" fontSize="9"/>
				<mx:RadioButtonGroup id="background" />
				<mx:HBox id="backgroundButtons" right="113" top="100" horizontalGap="2" paddingLeft="0" paddingTop="0" paddingRight="0" width="103">
					<mx:RadioButton enabled="true" value="{lang.backgroundImage}" selected="true" color="#FFFFFF" group="{background}"/>
					<mx:RadioButton enabled="true" value="{lang.backgroundImage2}" color="#2A55FF" group="{background}"/>
					<mx:RadioButton enabled="true" value="{lang.backgroundImage3}" color="#AA2AFF" group="{background}"/>
					<mx:RadioButton enabled="true" value="{lang.backgroundImage4}" color="#FFFFFF" group="{background}"/>
					<mx:RadioButton enabled="true" value="{lang.backgroundImage5}" color="#2A55FF" group="{background}"/>
					<mx:RadioButton enabled="true" value="{lang.backgroundImage6}" color="#AA2AFF" group="{background}"/>
				</mx:HBox>
				
				<mx:ComboBox id="language" width="93" dataProvider="{LanguageLoader.languages}"
					selectedIndex="0" change="changeLanguage(event)" open="lockOwnControls=true"
					close="lockOwnControls=false;if(canHideOwnControls)ownControls.visible=false"  right="10" top="4" fontFamily="Arial" fontSize="9"/>
				<mx:Button id="btnFilter" click="onFilter()" enabled="{ccCallState==CCCallEstablished}" width="93" height="16" right="10" top="28" fontFamily="Arial" fontSize="9"/>
				<mx:Button id="btnReport" click="onReport()" enabled="{ccCallState==CCCallEstablished}" width="93" height="16" right="10" top="46" fontFamily="Arial" fontSize="9"/>
				<mx:Button id="btnClear" click="onClearChat()"  width="93" height="16" right="10" top="64" fontFamily="Arial" fontSize="9"/>
				<mx:Button id="btnStop" click="onStop()" enabled="false"  width="93" height="16" right="10" top="82" fontFamily="Arial" fontSize="9"/>
				<mx:Button label="VERTICAL" click="loadVerticalLayout()"  width="93" height="16" right="10" top="100" fontFamily="Arial" fontSize="9"/>				
				<mx:HBox width="308" horizontalAlign="left" x="10" y="26">
					<mx:CheckBox id="cbAutoFindNext" selected="false" click="onAutoFindNext()" color="#FFFFFF"/>
					<mx:CheckBox id="cbCameraOnOnly" selected="false" click="onCameraOnOnly()" color="#ffffff" />
				</mx:HBox>
			</mx:Canvas>
			<mx:HBox width="672">
				<mx:VBox width="541" height="69" cornerRadius="4" borderStyle="solid"
					backgroundColor="#D7E0E7" backgroundAlpha="0.95" verticalGap="0">
					<mx:Canvas width="100%" height="100%">
						<mx:TextInput width="100%" height="100%" id="tiChat" enter="callLater(onSend);" 
							backgroundAlpha="0" borderStyle="none" focusAlpha="0.4" focusRoundedCorners="4"/>
						<mx:Button label="BUZZ!" verticalCenter="0" right="10" fontFamily="Arial" fontSize="10"
							alpha="0.5" click="onBuzz()" />
					</mx:Canvas>
					<mx:Canvas paddingTop="0" backgroundColor="#cccccc" width="100%" height="15">
						<mx:HBox>
							<mx:Label id="lblID" width="100" fontSize="8" truncateToFit="false"/>
							<mx:Label id="lblOtherId" width="100" fontSize="8" truncateToFit="false"/>
							<mx:Label id="betaLabel" fontSize="8"/>
						</mx:HBox>
						<mx:HBox right="0">
							<mx:Label id="lblUsersOnline" width="130" fontSize="8"  textAlign="right"/>
							<mx:Label id="lblOnlineIndicator" fontSize="8" textAlign="right" />
							<mx:Label fontSize="8" width="74" textAlign="right" id="lblCcCallState" color="#DDDDDD"/>
						</mx:HBox>
					</mx:Canvas>
				</mx:VBox>
				<!--<mx:VBox verticalGap="0">
					<mx:Button width="0" height="51" id="btnSend" visible="false" click="onSend()" enabled="false" fontFamily="Arial" fontSize="16"/>
				</mx:VBox>-->
				<mx:VBox verticalGap="0">
					<mx:Canvas width="121" height="69">
							<mx:Button id="btnStart" click="onStart()" visible="{btnStart.enabled}" width="100%" height="100%" fontFamily="Arial" fontSize="16" />
						<mx:VBox width="100%" height="100%" visible="{!btnStart.visible}" verticalGap="3">
							<mx:Canvas width="100%" height="100%" backgroundAlpha="0" borderStyle="none">
							<mx:Button height="100%" width="100%" id="btnStopAutoNextTimer" click="autoDisconnect.value=0; autoDisconnectChange()"
								visible="{autoDisconnect.value>0 &amp;&amp; ccCallState == CCCallEstablished}" fontFamily="Arial" fontSize="16" />
							<mx:Button height="100%" id="btnNext" enabled="false" click="onNext()" width="100%" fontFamily="Arial" fontSize="16"
								visible="{!btnStopAutoNextTimer.visible}" />
							</mx:Canvas>
						</mx:VBox>
					</mx:Canvas>
				</mx:VBox>
			</mx:HBox>	
		</mx:VBox>
	</mx:HBox>
	
	<!--<mx:Spacer height="0" />
	<mx:HBox width="100%" horizontalAlign="center">
	<mx:Image source="{lang.getSourceCodeImage}" visible="{lang.getSourceCodeImage != null}" id="btnGetTheSource" click="onGetYourOwn()" includeInLayout="{btnGetTheSource.visible}" />
	</mx:HBox>-->
</mx:VBox>
	
</mx:Application>
